<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>4.4. Zend\Cache\Pattern</title>
<link rel="stylesheet" href="dbstyle.css" type="text/css">
<meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2">
<link rel="home" href="index.html" title="Programmer's Reference Guide">
<link rel="up" href="zend.cache.html" title="Chapter 4. Zend\Cache">
<link rel="prev" href="zend.cache.storage.capabilities.html" title="4.3. Zend\Cache\Storage\Capabilities">
<link rel="next" href="zend.cache.utils.html" title="4.5. Zend\Cache\Utils">
<link rel="part" href="introduction.html" title="Part I. Introduction to Zend Framework">
<link rel="chapter" href="introduction.overview.html" title="Chapter 1. Overview">
<link rel="chapter" href="introduction.installation.html" title="Chapter 2. Installation">
<link rel="part" href="learning.html" title="Part II. Learning Zend Framework">
<link rel="chapter" href="learning.di.html" title="Chapter 3. Learning Dependency Injection">
<link rel="article" href="ar01.html" title="">
<link rel="part" href="reference.html" title="Part III. Zend Framework Reference">
<link rel="chapter" href="zend.cache.html" title="Chapter 4. Zend\Cache">
<link rel="chapter" href="zend.di.html" title="Chapter 5. Zend\Di">
<link rel="chapter" href="zend.event-manager.html" title="Chapter 6. Zend\EventManager">
<link rel="chapter" href="zend.http.html" title="Chapter 7. Zend_Http">
<link rel="chapter" href="zend.loader.html" title="Chapter 8. Zend_Loader">
<link rel="chapter" href="zend.mail.html" title="Chapter 9. Zend\Mail">
<link rel="chapter" href="zend.module.html" title="Chapter 10. Zend\Module">
<link rel="chapter" href="zend.mvc.html" title="Chapter 11. Zend\Mvc">
<link rel="chapter" href="zend.uri.html" title="Chapter 12. Zend_Uri">
<link rel="appendix" href="copyrights.html" title="Appendix A. Copyright Information">
<link rel="subsection" href="zend.cache.pattern.html#zend.cache.pattern.intro" title="4.4.1. Overview">
<link rel="subsection" href="zend.cache.pattern.html#zend.cache.pattern.quick-start" title="4.4.2. Quick Start">
<link rel="subsection" href="zend.cache.pattern.html#zend.cache.pattern.options" title="4.4.3. Configuration Options">
<link rel="subsection" href="zend.cache.pattern.html#zend.cache.pattern.methods" title="4.4.4. Available Methods">
<link rel="subsection" href="zend.cache.pattern.html#zend.cache.pattern.examples" title="4.4.5. Examples">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">4.4. Zend\Cache\Pattern</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.cache.storage.capabilities.html">Prev</a> </td>
<th width="60%" align="center">Chapter 4. Zend\Cache</th>
<td width="20%" align="right"> <a accesskey="n" href="zend.cache.utils.html">Next</a>
</td>
</tr>
</table></div>
<div class="section" title="4.4. Zend\Cache\Pattern">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.cache.pattern"></a>4.4. Zend\Cache\Pattern</h2></div></div></div>
<div class="section" title="4.4.1. Overview">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.cache.pattern.intro"></a>4.4.1. Overview</h3></div></div></div>
<p>
            Cache patterns are configurable objects to solve known performance bottlenecks. Each
            should be used only in the specific situations they are designed to address.  For
            example you can use one of the <code class="classname">CallbackCache</code>,
            <code class="classname">ObjectCache</code> or <code class="classname">ClassCache</code> patterns to
            cache method and function calls; to cache output generation, the
            <code class="classname">OutputCache</code> pattern could assist.
        </p>
<p>
            All cache patterns implements the same interface,
            <code class="classname">Zend\Cache\Pattern</code>, and most extend the abstract class
            <code class="classname">Zend\Cache\Pattern\AbstractPattern</code> to implement basic logic.
        </p>
<p>
            Configuration is provided via the
            <code class="classname">Zend\Cache\Pattern\PatternOptions</code> class, which can simply be
            instantiated with an associative array of options passed to the constructor.  To
            configure a pattern object, you can set an instance of
            <code class="classname">Zend\Cache\Pattern\PatternOptions</code> with
            <code class="methodname">setOptions</code>, or provide your options (either as an associative
            array or <code class="classname">PatternOptions</code> instance) as the second argument to the
            factory.
        </p>
<p>
            It's also possible to use a single instance of
            <code class="classname">Zend\Cache\Pattern\PatternOptions</code> and pass it to multiple pattern
            objects.
        </p>
</div>
<div class="section" title="4.4.2. Quick Start">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.cache.pattern.quick-start"></a>4.4.2. Quick Start</h3></div></div></div>
<p>
            Pattern objects can either be created from the provided
            <code class="classname">Zend\Cache\PatternFactory</code> factory, or, by simply
            instantiating one of the <code class="classname">Zend\Cache\Pattern\*</code>
            classes.
        </p>
<pre class="programlisting">
use Zend\Cache\PatternFactory,
    Zend\Cache\Pattern\PatternOptions;

// Via the factory:
$callbackCache = PatternFactory::factory('callback', array(
    'storage'      =&gt; 'apc',
    'cache_output' =&gt; true,
));

// OR, the equivalent manual instantiation:
$callbackCache = new \Zend\Cache\Pattern\CallbackCache();
$callbackCache-&gt;setOptions(new PatternOptions(array(
    'storage'      =&gt; 'apc',
    'cache_output' =&gt; true,
)));
</pre>
</div>
<div class="section" title="4.4.3. Configuration Options">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.cache.pattern.options"></a>4.4.3. Configuration Options</h3></div></div></div>
<div class="variablelist"><dl>
<dt>
<a name="zend.cache.pattern.options.cache-by-default"></a><span class="term">cache_by_default</span>
</dt>
<dd>
<p>
                        Flag indicating whether or not to cache by default. Used by the
                        <code class="classname">ClassCache</code> and <code class="classname">ObjectCache</code>
                        patterns.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setCacheByDefault</span>(<span class="methodparam">bool $cacheByDefault</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getCacheByDefault</span>();</code><p>Returns boolean.</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.cache-output"></a><span class="term">cache_output</span>
</dt>
<dd>
<p>
                        Used by the <code class="classname">CallbackCache</code>,
                        <code class="classname">ClassCache</code>, and <code class="classname">ObjectCache</code>
                        patterns. Flag used to determine whether or not to cache output.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setCacheOutput</span>(<span class="methodparam">bool $cacheOutput</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getCacheOutput</span>();</code><p>Returns boolean</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.class"></a><span class="term">class</span>
</dt>
<dd>
<p>
                        Set the name of the class to cache. Used by the
                        <code class="classname">ClassCache</code> pattern.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setclass</span>(<span class="methodparam">string $class</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getClass</span>();</code><p>Returns null|string</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.class-cache-methods"></a><span class="term">class_cache_methods</span>
</dt>
<dd>
<p>
                        Set list of method return values to cache. Used by
                        <code class="classname">ClassCache</code> Pattern.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setClassCacheMethods</span>(<span class="methodparam">array $classCacheMethods</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getClassCacheMethods</span>();</code><p>Returns array</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.class-non-cache-methods"></a><span class="term">class_non_cache_methods</span>
</dt>
<dd>
<p>
                        Set list of method return values that should <span class="emphasis"><em>not</em></span> be
                        cached. Used by the <code class="classname">ClassCache</code> pattern.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setClassNonCacheMethods</span>(<span class="methodparam">array $classNonCacheMethods</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getClassNonCacheMethods</span>();</code><p>Returns array</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.dir-perm"></a><span class="term">dir_perm</span>
</dt>
<dd>
<p>
                        Set directory permissions; proxies to "dir_umask" property, setting the
                        inverse of the provided value. Used by the
                        <code class="classname">CaptureCache</code> pattern.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setDirPerm</span>(<span class="methodparam">string|int $dirPerm</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getDirPerm</span>();</code><p>Returns int</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.dir-umask"></a><span class="term">dir_umask</span>
</dt>
<dd>
<p>
                        Set the directory umask value. Used by the
                        <code class="classname">CaptureCache</code> pattern.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setDirUmask</span>(<span class="methodparam">int $dirUmask</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getDirUmask</span>();</code><p>Returns int</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.file-locking"></a><span class="term">file_locking</span>
</dt>
<dd>
<p>
                        Set whether or not file locking should be used. Used by the
                        <code class="classname">CaptureCache</code> pattern.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setFileLocking</span>(<span class="methodparam">bool $fileLocking</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getFileLocking</span>();</code><p>Returns bool</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.file-perm"></a><span class="term">file_perm</span>
</dt>
<dd>
<p>
                        Set file permissions; proxies to the "file_umask" property, setting
                        the inverse of the value provided. Used by the
                        <code class="classname">CaptureCache</code> pattern.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setFilePerm</span>(<span class="methodparam">int|string $filePerm</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getFilePerm</span>();</code><p>Returns int</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.pattern-options.methods.set-file-umask"></a><span class="term">file_umask</span>
</dt>
<dd>
<p>
                        Set file umask; used by the <code class="classname">CaptureCache</code> pattern.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setFileUmask</span>(<span class="methodparam">int $fileUmask</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getFileUmask</span>();</code><p>Returns int</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.index-filename"></a><span class="term">index_filename</span>
</dt>
<dd>
<p>
                        Set value for index filename. Used by the
                        <code class="classname">CaptureCache</code> pattern.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setIndexFilename</span>(<span class="methodparam">string $indexFilename</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getIndexFilename</span>();</code><p>Returns string</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.object"></a><span class="term">object</span>
</dt>
<dd>
<p>
                        Set object to cache; used by the <code class="classname">ObjectCache</code> pattern.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setObject</span>(<span class="methodparam">object $object</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getObject</span>();</code><p>Returns null|object.</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.object-cache-magic-properties"></a><span class="term">object_cache_magic_properties</span>
</dt>
<dd>
<p>
                        Set flag indicating whether or not to cache magic properties. Used by the
                        <code class="classname">ObjectCache</code> pattern.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setObjectCacheMagicProperties</span>(<span class="methodparam">bool $objectCacheMagicProperties</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getObjectCacheMagicProperties</span>();</code><p>Returns bool</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.object-cache-methods"></a><span class="term">object_cache_methods</span>
</dt>
<dd>
<p>
                        Set list of object methods for which to cache return values. Used by
                        <code class="classname">ObjectCache</code> pattern.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setObjectCacheMethods</span>(<span class="methodparam">array $objectCacheMethods</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getObjectCacheMethods</span>();</code><p>Returns array</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.object-key"></a><span class="term">object_key</span>
</dt>
<dd>
<p>
                        Set the object key part; used to generate a callback key in order to speed
                        up key generation. Used by the <code class="classname">ObjectCache</code> pattern.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setObjectKey</span>(<span class="methodparam">null|string $objectKey</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getObjectKey</span>();</code><p>Returns null|string</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.object-non-cache-methods"></a><span class="term">object_non_cache_methods</span>
</dt>
<dd>
<p>
                        Set list of object methods for which <span class="emphasis"><em>not</em></span> to cache
                        return values. Used by the <code class="classname">ObjectCache</code> pattern.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setObjectNonCacheMethods</span>(<span class="methodparam">array $objectNonCacheMethods</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getObjectNonCacheMethods</span>();</code><p>Returns array</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.public-dir"></a><span class="term">public_dir</span>
</dt>
<dd>
<p>
                        Set location of public directory; used by the
                        <code class="classname">CaptureCache</code> pattern.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setPublicDir</span>();</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getPublicDir</span>();</code><p>Returns null|string</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.storage"></a><span class="term">storage</span>
</dt>
<dd>
<p>
                        Set the storage adapter. Required for the following Pattern classes:
                        <code class="classname">CallbackCache</code>, <code class="classname">ClassCache</code>,
                        <code class="classname">ObjectCache</code>, <code class="classname">OutputCache</code>.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setStorage</span>(<span class="methodparam">string|array|Zend\Cache\Storage\Adapter $storage</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getStorage</span>();</code><p>Returns null|Zend\Cache\Storage\Adapter</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.tag-key"></a><span class="term">tag_key</span>
</dt>
<dd>
<p>
                        Set the prefix used for tag keys. Used by the
                        <code class="classname">CaptureCache</code> pattern.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setTagKey</span>(<span class="methodparam">string $tagKey</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getTagKey</span>();</code><p>Returns string</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.tags"></a><span class="term">tags</span>
</dt>
<dd>
<p>
                        Set list of tags to use for captured content. Used by the
                        <code class="classname">CaptureCache</code> pattern.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setTags</span>(<span class="methodparam">array $tags</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getTags</span>();</code><p>Returns array</p>
</li>
</ul></div>
</dd>
<dt>
<a name="zend.cache.pattern.options.tag-storage"></a><span class="term">
                </span>
</dt>
<dd>
<p>
                        Set storage adapter to use for tags. Used by the
                        <code class="classname">CaptureCache</code> pattern.
                    </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">setTagStorage</span>(<span class="methodparam">string|array|Zend\Cache\Storage\Adapter $tagStorage</span>);</code><p>Implements a fluent interface.</p>
</li>
<li class="listitem">
<code class="methodsynopsis"><span class="methodname">getTagStorage</span>();</code><p>Returns null|Zend\Cache\Storage\Adapter</p>
</li>
</ul></div>
</dd>
</dl></div>
</div>
<div class="section" title="4.4.4. Available Methods">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.cache.pattern.methods"></a>4.4.4. Available Methods</h3></div></div></div>
<div class="variablelist"><dl>
<dt>
<a name="zend.cache.pattern.methods.set-options"></a><span class="term">setOptions</span>
</dt>
<dd>
<code class="methodsynopsis"><span class="methodname">setOptions</span>(<span class="methodparam">Zend\Cache\Pattern\PatternOptions $options</span>);</code><p>Set pattern options</p>
<p>Returns Zend\Cache\Pattern</p>
</dd>
<dt>
<a name="zend.cache.pattern.methods.get-options"></a><span class="term">getOptions</span>
</dt>
<dd>
<code class="methodsynopsis"><span class="methodname">getOptions</span>();</code><p>Get all pattern options</p>
<p>Returns <code class="classname">PatternOptions</code> instance.</p>
</dd>
</dl></div>
</div>
<div class="section" title="4.4.5. Examples">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.cache.pattern.examples"></a>4.4.5. Examples</h3></div></div></div>
<div class="example">
<a name="zend.cache.pattern.examples.callback"></a><p class="title"><b>Example 4.3. Using the callback cache pattern</b></p>
<div class="example-contents"><pre class="programlisting">
use Zend\Cache\PatternFactory;

$callbackCache = PatternFactory::factory('callback', array(
    'storage' =&gt; 'apc'
));

// Calls and caches the function doResourceIntensiceStuff with three arguments
// and returns result
$result = $callbackCache-&gt;call('doResourceIntensiveStuff', array(
    'argument1',
    'argument2',
    'argumentN',
));
</pre></div>
</div>
<br class="example-break"><div class="example">
<a name="zend.cache.pattern.examples.object"></a><p class="title"><b>Example 4.4. Using the object cache pattern</b></p>
<div class="example-contents"><pre class="programlisting">
use Zend\Cache\PatternFactory;

$object      = new MyObject();
$objectProxy = PatternFactory::factory('object', array(
    'object'  =&gt; $object,
    'storage' =&gt; 'apc',
));

// Calls and caches $object-&gt;doResourceIntensiveStuff with three arguments
// and returns result
$result = $objectProxy-&gt;doResourceIntensiveStuff('argument1', 'argument2', 'argumentN');
</pre></div>
</div>
<br class="example-break"><div class="example">
<a name="zend.cache.pattern.examples.class"></a><p class="title"><b>Example 4.5. Using the class cache pattern</b></p>
<div class="example-contents"><pre class="programlisting">
use Zend\Cache\PatternFactory;

$classProxy = PatternFactory::factory('class', array(
    'class'   =&gt; 'MyClass',
    'storage' =&gt; 'apc',
));

// Calls and caches MyClass::doResourceIntensiveStuff with three arguments
// and returns result
$result = $classProxy-&gt;doResourceIntensiveStuff('argument1', 'argument2', 'argumentN');
</pre></div>
</div>
<br class="example-break"><div class="example">
<a name="zend.cache.pattern.examples.output"></a><p class="title"><b>Example 4.6. Using the output cache pattern</b></p>
<div class="example-contents"><pre class="programlisting">
use Zend\Cache\PatternFactory;

$outputCache = PatternFactory::factory('output', array(
    'storage' =&gt; 'filesystem',
));

// Start capturing all output (excluding headers) and write it to storage.
// If there is already a cached item with the same key it will be
// output and return true, else false.
if ($outputCache-&gt;start('MyUniqueKey') === false) {
    echo 'cache output since: ' . date('H:i:s') . "&lt;br /&gt;\n";
    
    // end capturing output, write content to cache storage and display
    // captured content
    $outputCache-&gt;end();
}

echo 'This output is never cached.';
</pre></div>
</div>
<br class="example-break"><div class="example">
<a name="zend.cache.pattern.examples.capture"></a><p class="title"><b>Example 4.7. Using the capture cache pattern</b></p>
<div class="example-contents">
<p>
                You need to configure your HTTP server to redirect missing content to run your
                script generating it.
            </p>
<p>
                This example uses Apache with the following .htaccess:
            </p>
<pre class="programlisting">
ErrorDocument 404 /index.php
</pre>
<p>Within your index.php you can add the following content:</p>
<pre class="programlisting">
use Zend\Cache\PatternFactory;

$capture = PatternFactory::factory('capture', array(
    'public_dir' =&gt; __DIR__,
));

// Start capturing all output excl. headers. and write to public directory
// If the request was already written the file will be overwritten.
$capture-&gt;start();

// do stuff to dynamically generate output

</pre>
</div>
</div>
<br class="example-break">
</div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.cache.storage.capabilities.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="zend.cache.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="zend.cache.utils.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">4.3. Zend\Cache\Storage\Capabilities </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> 4.5. Zend\Cache\Utils</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
