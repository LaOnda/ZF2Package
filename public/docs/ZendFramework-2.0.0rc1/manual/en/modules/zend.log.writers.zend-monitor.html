

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Writing to the Zend Server Monitor &mdash; Zend Framework 2 2.0.0beta5 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0beta5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Zend Framework 2 2.0.0beta5 documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../index.html">Zend Framework 2 2.0.0beta5 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="writing-to-the-zend-server-monitor">
<span id="zend-log-writers-zendmonitor"></span><h1>Writing to the Zend Server Monitor<a class="headerlink" href="#writing-to-the-zend-server-monitor" title="Permalink to this headline">Â¶</a></h1>
<p><tt class="docutils literal"><span class="pre">Zend\Log\Writer\ZendMonitor</span></tt> allows you to log events via Zend Server&#8217;s Monitor <em>API</em>. This allows you to
aggregate log messages for your entire application environment in a single location. Internally, it simply uses the
<tt class="docutils literal"><span class="pre">monitor_custom_event()</span></tt> function from the Zend Monitor <em>API</em>.</p>
<p>One particularly useful feature of the Monitor <em>API</em> is that it allows you to specify arbitrary custom information
alongside the log message. For instance, if you wish to log an exception, you can log not just the exception
message, but pass the entire exception object to the function, and then inspect the object within the Zend Server
event monitor.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Zend Monitor must be installed and enabled</strong></p>
<p class="last">In order to use this log writer, Zend Monitor must be both installed and enabled. However, it is designed such
that if Zend Monitor is not detected, it will simply act as a <tt class="docutils literal"><span class="pre">NULL</span></tt> logger.</p>
</div>
<p>Instantiating the <tt class="docutils literal"><span class="pre">Zend\Log\Writer\ZendMonitor</span></tt> log writer is trivial:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$writer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Writer\ZendMonitor</span><span class="p">();</span>
<span class="nv">$logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Logger</span><span class="p">(</span><span class="nv">$writer</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>Then, simply log messages as usual:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;This is a message&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>If you want to specify additional information to log with the event, pass that information in a second parameter:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Exception occurred&#39;</span><span class="p">,</span> <span class="nv">$e</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>The second parameter may be a scalar, object, or array; if you need to pass multiple pieces of information, the
best way to do so is to pass an associative array.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Exception occurred&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;request&#39;</span>   <span class="o">=&gt;</span> <span class="nv">$request</span><span class="p">,</span>
    <span class="s1">&#39;exception&#39;</span> <span class="o">=&gt;</span> <span class="nv">$e</span><span class="p">,</span>
<span class="p">));</span>
</pre></div>
</td></tr></table></div>
<p>Within Zend Server, your event is logged as a &#8220;custom event&#8221;. From the &#8220;Monitor&#8221; tab, select the &#8220;Events&#8221; sub-item,
and then filter on &#8220;Custom&#8221; to see custom events.</p>
<img alt="../_images/zend.log.writers.zendmonitor-events.png" src="../_images/zend.log.writers.zendmonitor-events.png" />
<p>Events in Zend Server&#8217;s Monitor dashboard</p>
<p>In this screenshot, the first two events listed are custom events logged via the <tt class="docutils literal"><span class="pre">Zend\Log\Writer\ZendMonitor</span></tt>
log writer. You may then click on an event to view all information related to it.</p>
<img alt="../_images/zend.log.writers.zendmonitor-event.png" src="../_images/zend.log.writers.zendmonitor-event.png" />
<p>Event detail in Zend Server&#8217;s Monitor</p>
<p>Clicking on the &#8220;Custom&#8221; sub tab will detail any extra information you logged by passing the second argument to the
logging method. This information will be logged as the <tt class="docutils literal"><span class="pre">info</span></tt> subkey; you can see that the request object was
logged in this example.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/zf2_logo.png" alt="Logo"/>
            </a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/modules/zend.log.writers.zend-monitor.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../index.html">Zend Framework 2 2.0.0beta5 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Zend Technologies Ltd..
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>