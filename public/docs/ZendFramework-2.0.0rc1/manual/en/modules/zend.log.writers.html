

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Writers &mdash; Zend Framework 2 2.0.0beta5 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0beta5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Zend Framework 2 2.0.0beta5 documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../index.html">Zend Framework 2 2.0.0beta5 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="writers">
<span id="zend-log-writers"></span><h1>Writers<a class="headerlink" href="#writers" title="Permalink to this headline">¶</a></h1>
<p>A Writer is an object that inherits from <tt class="docutils literal"><span class="pre">Zend\Log\Writer\AbstractWriter</span></tt>. A Writer&#8217;s responsibility is to record
log data to a storage backend.</p>
<div class="section" id="writing-to-streams">
<span id="zend-log-writers-stream"></span><h2>Writing to Streams<a class="headerlink" href="#writing-to-streams" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">Zend\Log\Writer\Stream</span></tt> sends log data to a <a class="reference external" href="http://www.php.net/stream">PHP stream</a>.</p>
<p>To write log data to the <em>PHP</em> output buffer, use the URL <tt class="docutils literal"><span class="pre">php://output</span></tt>. Alternatively, you can send log data
directly to a stream like <tt class="docutils literal"><span class="pre">STDERR</span></tt> (<tt class="docutils literal"><span class="pre">php://stderr</span></tt>).</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$writer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Writer\Stream</span><span class="p">(</span><span class="s1">&#39;php://output&#39;</span><span class="p">);</span>
<span class="nv">$logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Logger</span><span class="p">(</span><span class="nv">$writer</span><span class="p">);</span>

<span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Informational message&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>To write data to a file, use one of the <a class="reference external" href="http://www.php.net/manual/en/wrappers.php#wrappers.file">Filesystem URLs</a>:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$writer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Writer\Stream</span><span class="p">(</span><span class="s1">&#39;/path/to/logfile&#39;</span><span class="p">);</span>
<span class="nv">$logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Logger</span><span class="p">(</span><span class="nv">$writer</span><span class="p">);</span>

<span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Informational message&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>By default, the stream opens in the append mode (&#8220;a&#8221;). To open it with a different mode, the
<tt class="docutils literal"><span class="pre">Zend\Log\Writer\Stream</span></tt> constructor accepts an optional second parameter for the mode.</p>
<p>The constructor of <tt class="docutils literal"><span class="pre">Zend\Log\Writer\Stream</span></tt> also accepts an existing stream resource:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$stream</span> <span class="o">=</span> <span class="o">@</span><span class="nb">fopen</span><span class="p">(</span><span class="s1">&#39;/path/to/logfile&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">$stream</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="s1">&#39;Failed to open stream&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="nv">$writer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Writer\Stream</span><span class="p">(</span><span class="nv">$stream</span><span class="p">);</span>
<span class="nv">$logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Logger</span><span class="p">(</span><span class="nv">$writer</span><span class="p">);</span>

<span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Informational message&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>You cannot specify the mode for existing stream resources. Doing so causes a <tt class="docutils literal"><span class="pre">Zend\Log\Exception</span></tt> to be thrown.</p>
</div>
<div class="section" id="writing-to-databases">
<span id="zend-log-writers-database"></span><h2>Writing to Databases<a class="headerlink" href="#writing-to-databases" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">Zend\Log\Writer\Db</span></tt> writes log information to a database table using <tt class="docutils literal"><span class="pre">Zend\Db\Adapter\Adapter</span></tt>. The
constructor of <tt class="docutils literal"><span class="pre">Zend\Log\Writer\Db</span></tt> receives a <tt class="docutils literal"><span class="pre">Zend\Db\Adapter\Adapter</span></tt> instance, a table name, an optional
mapping of event data to database columns, and an optional string contains the character separator for the log
array:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$dbconfig</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="c1">// Sqlite Configuration</span>
    <span class="s1">&#39;driver&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Pdo&#39;</span><span class="p">,</span>
    <span class="s1">&#39;dsn&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;sqlite:&#39;</span> <span class="o">.</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/tmp/sqlite.db&#39;</span><span class="p">,</span>
<span class="p">);</span>
<span class="nv">$db</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Db\Adapter\Adapter</span><span class="p">(</span><span class="nv">$dbconfig</span><span class="p">);</span>

<span class="nv">$writer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Writer\Db</span><span class="p">(</span><span class="nv">$db</span><span class="p">,</span> <span class="s1">&#39;log_table_name&#39;</span><span class="p">);</span>
<span class="nv">$logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Logger</span><span class="p">(</span><span class="nv">$writer</span><span class="p">);</span>

<span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Informational message&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>The example above writes a single row of log data to the database table named &#8216;log_table_name&#8217; table. The database
column will be created according to the event array generated by the <tt class="docutils literal"><span class="pre">Zend\Log\Logger</span></tt> instance.</p>
<p>If we specify the mapping of the events with the database columns the log will store in the database only the
selected fields.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$dbconfig</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="c1">// Sqlite Configuration</span>
    <span class="s1">&#39;driver&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Pdo&#39;</span><span class="p">,</span>
    <span class="s1">&#39;dsn&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;sqlite:&#39;</span> <span class="o">.</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/tmp/sqlite.db&#39;</span><span class="p">,</span>
<span class="p">);</span>
<span class="nv">$db</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Db\Adapter\Adapter</span><span class="p">(</span><span class="nv">$dbconfig</span><span class="p">);</span>

<span class="nv">$mapping</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;timestamp&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span>
    <span class="s1">&#39;priority&#39;</span>  <span class="o">=&gt;</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span>
    <span class="s1">&#39;message&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;event&#39;</span>
<span class="p">);</span>
<span class="nv">$writer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Writer\Db</span><span class="p">(</span><span class="nv">$db</span><span class="p">,</span> <span class="s1">&#39;log_table_name&#39;</span><span class="p">,</span> <span class="nv">$mapping</span><span class="p">);</span>
<span class="nv">$logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Logger</span><span class="p">(</span><span class="nv">$writer</span><span class="p">);</span>

<span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Informational message&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>The previous example will store only the log information timestamp, priority and message in the database fields
date, type and event.</p>
<p>The <tt class="docutils literal"><span class="pre">Zend\Log\Writer\Db</span></tt> has a second optional parameter in the constructor. This parameter is the character
separator for the log events managed by an array. For instance, if we have a log that contains an array extra
fields, this will be translated in &#8216;extra-field&#8217;, where &#8216;-&#8216; is the character separator (default) and field is the
subname of the specific extra field.</p>
</div>
</div>
<div class="section" id="writing-to-email">
<span id="zend-log-writers-mail"></span><h1>Writing to Email<a class="headerlink" href="#writing-to-email" title="Permalink to this headline">¶</a></h1>
<p><tt class="docutils literal"><span class="pre">Zend\Log\Writer\Mail</span></tt> writes log entries in an email message by using <tt class="docutils literal"><span class="pre">Zend\Mail</span></tt>. The
<tt class="docutils literal"><span class="pre">Zend\Log\Writer\Mail</span></tt> constructor takes a <tt class="docutils literal"><span class="pre">Zend\Mail\Message</span></tt> object to compose the message, and an optional
<tt class="docutils literal"><span class="pre">Zend\Mail\Transport</span></tt> object to send the email (the default transport is <tt class="docutils literal"><span class="pre">Zend\Mail\Transport\Sendmail</span></tt>).</p>
<p>The primary use case for <tt class="docutils literal"><span class="pre">Zend\Log\Writer\Mail</span></tt> is notifying developers, systems administrators, or any concerned
parties of errors that might be occurring with <em>PHP</em>-based scripts. <tt class="docutils literal"><span class="pre">Zend\Log\Writer\Mail</span></tt> was born out of the
idea that if something is broken, a human being needs to be alerted of it immediately so they can take corrective
action.</p>
<p>Basic usage is outlined below:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$mail</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Mail\Message</span><span class="p">();</span>
<span class="nv">$mail</span><span class="o">-&gt;</span><span class="na">setFrom</span><span class="p">(</span><span class="s1">&#39;errors@example.org&#39;</span><span class="p">)</span>
     <span class="o">-&gt;</span><span class="na">addTo</span><span class="p">(</span><span class="s1">&#39;project_developers@example.org&#39;</span><span class="p">);</span>

<span class="nv">$writer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Writer\Mail</span><span class="p">(</span><span class="nv">$mail</span><span class="p">);</span>

<span class="c1">// Set subject text for use; summary of number of errors is appended to the</span>
<span class="c1">// subject line before sending the message.</span>
<span class="nv">$writer</span><span class="o">-&gt;</span><span class="na">setSubjectPrependText</span><span class="p">(</span><span class="s1">&#39;Errors with script foo.php&#39;</span><span class="p">);</span>

<span class="c1">// Only email warning level entries and higher.</span>
<span class="nv">$writer</span><span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="nx">Zend\Log\Logger</span><span class="o">::</span><span class="na">WARN</span><span class="p">);</span>

<span class="nv">$log</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Logger</span><span class="p">();</span>
<span class="nv">$log</span><span class="o">-&gt;</span><span class="na">addWriter</span><span class="p">(</span><span class="nv">$writer</span><span class="p">);</span>

<span class="c1">// Something bad happened!</span>
<span class="nv">$log</span><span class="o">-&gt;</span><span class="na">error</span><span class="p">(</span><span class="s1">&#39;unable to connect to database&#39;</span><span class="p">);</span>

<span class="c1">// On writer shutdown, send() is triggered to send an email with</span>
<span class="c1">// all log entries at or above the Zend\Log\Logger filter level.</span>
</pre></div>
</td></tr></table></div>
<p><tt class="docutils literal"><span class="pre">Zend\Log\Writer\Mail</span></tt> will render the email body as plain text.</p>
<p>One email is sent containing all log entries at or above the filter level. For example, if warning-level entries an
up are to be emailed, and two warnings and five errors occur, the resulting email will contain a total of seven log
entries.</p>
</div>
<div class="section" id="writing-to-the-system-log">
<span id="zend-log-writers-syslog"></span><h1>Writing to the System Log<a class="headerlink" href="#writing-to-the-system-log" title="Permalink to this headline">¶</a></h1>
<p><tt class="docutils literal"><span class="pre">Zend\Log\Writer\Syslog</span></tt> writes log entries to the system log (syslog). Internally, it proxies to <em>PHP</em>&#8216;s
<tt class="docutils literal"><span class="pre">openlog()</span></tt>, <tt class="docutils literal"><span class="pre">closelog()</span></tt>, and <tt class="docutils literal"><span class="pre">syslog()</span></tt> functions.</p>
<p>One useful case for <tt class="docutils literal"><span class="pre">Zend\Log\Writer\Syslog</span></tt> is for aggregating logs from clustered machines via the system log
functionality. Many systems allow remote logging of system events, which allows system administrators to monitor a
cluster of machines from a single log file.</p>
<p>By default, all syslog messages generated are prefixed with the string &#8220;Zend_Log&#8221;. You may specify a different
&#8220;application&#8221; name by which to identify such log messages by either passing the application name to the constructor
or the application accessor:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// At instantiation, pass the &quot;application&quot; key in the options:</span>
<span class="nv">$writer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Writer\Syslog</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;application&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;FooBar&#39;</span><span class="p">));</span>

<span class="c1">// Any other time:</span>
<span class="nv">$writer</span><span class="o">-&gt;</span><span class="na">setApplicationName</span><span class="p">(</span><span class="s1">&#39;BarBaz&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>The system log also allows you to identify the &#8220;facility,&#8221; or application type, logging the message; many system
loggers will actually generate different log files per facility, which again aids administrators monitoring server
activity.</p>
<p>You may specify the log facility either in the constructor or via an accessor. It should be one of the
<tt class="docutils literal"><span class="pre">openlog()</span></tt> constants defined on the <a class="reference external" href="http://php.net/openlog">openlog() manual page</a>.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// At instantiation, pass the &quot;facility&quot; key in the options:</span>
<span class="nv">$writer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Writer\Syslog</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;facility&#39;</span> <span class="o">=&gt;</span> <span class="nx">LOG_AUTH</span><span class="p">));</span>

<span class="c1">// Any other time:</span>
<span class="nv">$writer</span><span class="o">-&gt;</span><span class="na">setFacility</span><span class="p">(</span><span class="nx">LOG_USER</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>When logging, you may continue to use the default <tt class="docutils literal"><span class="pre">Zend\Log\Logger</span></tt> priority constants; internally, they are
mapped to the appropriate <tt class="docutils literal"><span class="pre">syslog()</span></tt> priority constants.</p>
</div>
<div class="section" id="writing-to-the-zend-server-monitor">
<span id="zend-log-writers-zendmonitor"></span><h1>Writing to the Zend Server Monitor<a class="headerlink" href="#writing-to-the-zend-server-monitor" title="Permalink to this headline">¶</a></h1>
<p><tt class="docutils literal"><span class="pre">Zend\Log\Writer\ZendMonitor</span></tt> allows you to log events via Zend Server&#8217;s Monitor <em>API</em>. This allows you to
aggregate log messages for your entire application environment in a single location. Internally, it simply uses the
<tt class="docutils literal"><span class="pre">monitor_custom_event()</span></tt> function from the Zend Monitor <em>API</em>.</p>
<p>One particularly useful feature of the Monitor <em>API</em> is that it allows you to specify arbitrary custom information
alongside the log message. For instance, if you wish to log an exception, you can log not just the exception
message, but pass the entire exception object to the function, and then inspect the object within the Zend Server
event monitor.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Zend Monitor must be installed and enabled</strong></p>
<p class="last">In order to use this log writer, Zend Monitor must be both installed and enabled. However, it is designed such
that if Zend Monitor is not detected, it will simply act as a <tt class="docutils literal"><span class="pre">NULL</span></tt> logger.</p>
</div>
<p>Instantiating the <tt class="docutils literal"><span class="pre">Zend\Log\Writer\ZendMonitor</span></tt> log writer is trivial:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$writer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Writer\ZendMonitor</span><span class="p">();</span>
<span class="nv">$logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Logger</span><span class="p">(</span><span class="nv">$writer</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>Then, simply log messages as usual:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;This is a message&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>If you want to specify additional information to log with the event, pass that information in a second parameter:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Exception occurred&#39;</span><span class="p">,</span> <span class="nv">$e</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>The second parameter may be a scalar, object, or array; if you need to pass multiple pieces of information, the
best way to do so is to pass an associative array.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Exception occurred&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;request&#39;</span>   <span class="o">=&gt;</span> <span class="nv">$request</span><span class="p">,</span>
    <span class="s1">&#39;exception&#39;</span> <span class="o">=&gt;</span> <span class="nv">$e</span><span class="p">,</span>
<span class="p">));</span>
</pre></div>
</td></tr></table></div>
<p>Within Zend Server, your event is logged as a &#8220;custom event&#8221;. From the &#8220;Monitor&#8221; tab, select the &#8220;Events&#8221; sub-item,
and then filter on &#8220;Custom&#8221; to see custom events.</p>
<img alt="../_images/zend.log.writers.zendmonitor-events.png" src="../_images/zend.log.writers.zendmonitor-events.png" />
<p>Events in Zend Server&#8217;s Monitor dashboard</p>
<p>In this screenshot, the first two events listed are custom events logged via the <tt class="docutils literal"><span class="pre">Zend\Log\Writer\ZendMonitor</span></tt>
log writer. You may then click on an event to view all information related to it.</p>
<img alt="../_images/zend.log.writers.zendmonitor-event.png" src="../_images/zend.log.writers.zendmonitor-event.png" />
<p>Event detail in Zend Server&#8217;s Monitor</p>
<p>Clicking on the &#8220;Custom&#8221; sub tab will detail any extra information you logged by passing the second argument to the
logging method. This information will be logged as the <tt class="docutils literal"><span class="pre">info</span></tt> subkey; you can see that the request object was
logged in this example.</p>
<div class="section" id="stubbing-out-the-writer">
<span id="zend-log-writers-null"></span><h2>Stubbing Out the Writer<a class="headerlink" href="#stubbing-out-the-writer" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">Zend\Log\Writer\Null</span></tt> is a stub that does not write log data to anything. It is useful for disabling logging
or stubbing out logging during tests:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$writer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Writer\Null</span><span class="p">;</span>
<span class="nv">$logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Logger</span><span class="p">(</span><span class="nv">$writer</span><span class="p">);</span>

<span class="c1">// goes nowhere</span>
<span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Informational message&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="testing-with-the-mock">
<span id="zend-log-writers-mock"></span><h2>Testing with the Mock<a class="headerlink" href="#testing-with-the-mock" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">Zend\Log\Writer\Mock</span></tt> is a very simple writer that records the raw data it receives in an array exposed as a
public property.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$mock</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Writer\Mock</span><span class="p">;</span>
<span class="nv">$logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Logger</span><span class="p">(</span><span class="nv">$mock</span><span class="p">);</span>

<span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Informational message&#39;</span><span class="p">);</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$mock</span><span class="o">-&gt;</span><span class="na">events</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

<span class="c1">// Array</span>
<span class="c1">// (</span>
<span class="c1">//    [timestamp] =&gt; 2007-04-06T07:16:37-07:00</span>
<span class="c1">//    [message] =&gt; Informational message</span>
<span class="c1">//    [priority] =&gt; 6</span>
<span class="c1">//    [priorityName] =&gt; INFO</span>
<span class="c1">// )</span>
</pre></div>
</td></tr></table></div>
<p>To clear the events logged by the mock, simply set <tt class="docutils literal"><span class="pre">$mock-&gt;events</span> <span class="pre">=</span> <span class="pre">array()</span></tt>.</p>
</div>
<div class="section" id="compositing-writers">
<span id="zend-log-writers-compositing"></span><h2>Compositing Writers<a class="headerlink" href="#compositing-writers" title="Permalink to this headline">¶</a></h2>
<p>There is no composite Writer object. However, a Log instance can write to any number of Writers. To do this, use
the <tt class="docutils literal"><span class="pre">addWriter()</span></tt> method:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$writer1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Writer\Stream</span><span class="p">(</span><span class="s1">&#39;/path/to/first/logfile&#39;</span><span class="p">);</span>
<span class="nv">$writer2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Writer\Stream</span><span class="p">(</span><span class="s1">&#39;/path/to/second/logfile&#39;</span><span class="p">);</span>

<span class="nv">$logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Log\Logger</span><span class="p">();</span>
<span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">addWriter</span><span class="p">(</span><span class="nv">$writer1</span><span class="p">);</span>
<span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">addWriter</span><span class="p">(</span><span class="nv">$writer2</span><span class="p">);</span>

<span class="c1">// goes to both writers</span>
<span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Informational message&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>You can also specify the priority number for each writer to change the order of writing. The priority number is an
integer number passed as second parameter in the <tt class="docutils literal"><span class="pre">addWriter()</span></tt> method.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/zf2_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Writers</a><ul>
<li><a class="reference internal" href="#writing-to-streams">Writing to Streams</a></li>
<li><a class="reference internal" href="#writing-to-databases">Writing to Databases</a></li>
</ul>
</li>
<li><a class="reference internal" href="#writing-to-email">Writing to Email</a></li>
<li><a class="reference internal" href="#writing-to-the-system-log">Writing to the System Log</a></li>
<li><a class="reference internal" href="#writing-to-the-zend-server-monitor">Writing to the Zend Server Monitor</a><ul>
<li><a class="reference internal" href="#stubbing-out-the-writer">Stubbing Out the Writer</a></li>
<li><a class="reference internal" href="#testing-with-the-mock">Testing with the Mock</a></li>
<li><a class="reference internal" href="#compositing-writers">Compositing Writers</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/modules/zend.log.writers.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../index.html">Zend Framework 2 2.0.0beta5 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Zend Technologies Ltd..
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>