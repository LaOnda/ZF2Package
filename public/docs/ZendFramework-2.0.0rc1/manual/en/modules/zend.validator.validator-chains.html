

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Validator Chains &mdash; Zend Framework 2 2.0.0beta5 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0beta5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Zend Framework 2 2.0.0beta5 documentation" href="../index.html" />
    <link rel="next" title="Writing Validators" href="zend.validator.writing-validators.html" />
    <link rel="prev" title="Standard Validation Classes" href="zend.validator.set.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="zend.validator.writing-validators.html" title="Writing Validators"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="zend.validator.set.html" title="Standard Validation Classes"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Zend Framework 2 2.0.0beta5 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="validator-chains">
<span id="zend-validator-validator-chains"></span><h1>Validator Chains<a class="headerlink" href="#validator-chains" title="Permalink to this headline">Â¶</a></h1>
<p>Often multiple validations should be applied to some value in a particular order. The following code demonstrates a
way to solve the example from the <a class="reference internal" href="zend.validator.html#zend-validator-introduction"><em>introduction</em></a>, where a username must be
between 6 and 12 alphanumeric characters:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// Create a validator chain and add validators to it</span>
<span class="nv">$validatorChain</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Validator\ValidatorChain</span><span class="p">();</span>
<span class="nv">$validatorChain</span><span class="o">-&gt;</span><span class="na">addValidator</span><span class="p">(</span>
                    <span class="k">new</span> <span class="nx">Zend\Validator\StringLength</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;min&#39;</span> <span class="o">=&gt;</span> <span class="mi">6</span><span class="p">,</span>
                                                         <span class="s1">&#39;max&#39;</span> <span class="o">=&gt;</span> <span class="mi">12</span><span class="p">)))</span>
               <span class="o">-&gt;</span><span class="na">addValidator</span><span class="p">(</span><span class="k">new</span> <span class="nx">Zend\Validator\Alnum</span><span class="p">());</span>

<span class="c1">// Validate the username</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$validatorChain</span><span class="o">-&gt;</span><span class="na">isValid</span><span class="p">(</span><span class="nv">$username</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// username passed validation</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// username failed validation; print reasons</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$validatorChain</span><span class="o">-&gt;</span><span class="na">getMessages</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">$message</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Validators are run in the order they were added to <tt class="docutils literal"><span class="pre">Zend\Validator\ValidatorChain</span></tt>. In the above example, the
username is first checked to ensure that its length is between 6 and 12 characters, and then it is checked to
ensure that it contains only alphanumeric characters. The second validation, for alphanumeric characters, is
performed regardless of whether the first validation, for length between 6 and 12 characters, succeeds. This means
that if both validations fail, <tt class="docutils literal"><span class="pre">getMessages()</span></tt> will return failure messages from both validators.</p>
<p>In some cases it makes sense to have a validator break the chain if its validation process fails.
<tt class="docutils literal"><span class="pre">Zend\Validator\ValidatorChain</span></tt> supports such use cases with the second parameter to the <tt class="docutils literal"><span class="pre">addValidator()</span></tt>
method. By setting <tt class="docutils literal"><span class="pre">$breakChainOnFailure</span></tt> to <tt class="docutils literal"><span class="pre">TRUE</span></tt>, the added validator will break the chain execution upon
failure, which avoids running any other validations that are determined to be unnecessary or inappropriate for the
situation. If the above example were written as follows, then the alphanumeric validation would not occur if the
string length validation fails:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$validatorChain</span><span class="o">-&gt;</span><span class="na">addValidator</span><span class="p">(</span>
                    <span class="k">new</span> <span class="nx">Zend\Validator\StringLength</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;min&#39;</span> <span class="o">=&gt;</span> <span class="mi">6</span><span class="p">,</span>
                                                         <span class="s1">&#39;max&#39;</span> <span class="o">=&gt;</span> <span class="mi">12</span><span class="p">)),</span>
                    <span class="k">true</span><span class="p">)</span>
               <span class="o">-&gt;</span><span class="na">addValidator</span><span class="p">(</span><span class="k">new</span> <span class="nx">Zend\Validator\Alnum</span><span class="p">());</span>
</pre></div>
</td></tr></table></div>
<p>Any object that implements <tt class="docutils literal"><span class="pre">Zend\Validator\ValidatorInterface</span></tt> may be used in a validator chain.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/zf2_logo.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="zend.validator.set.html"
                        title="previous chapter">Standard Validation Classes</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="zend.validator.writing-validators.html"
                        title="next chapter">Writing Validators</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/modules/zend.validator.validator-chains.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="zend.validator.writing-validators.html" title="Writing Validators"
             >next</a> |</li>
        <li class="right" >
          <a href="zend.validator.set.html" title="Standard Validation Classes"
             >previous</a> |</li>
        <li><a href="../index.html">Zend Framework 2 2.0.0beta5 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Zend Technologies Ltd..
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>