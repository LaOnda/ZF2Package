<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>19.6. The ClassMapAutoloader</title>
<link rel="stylesheet" type="text/css" href="dbstyle.css">
<meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1">
<link rel="home" href="index.html" title="Programmer's Reference Guide">
<link rel="up" href="zend.loader.html" title="Chapter 19. Zend\Loader">
<link rel="prev" href="zend.loader.spl-autoloader.methods.register.html" title="register">
<link rel="next" href="zend.loader.class-map-autoloader.methods.constructor.html" title="__construct">
<link rel="part" href="introduction.html" title="Part I. Introduction to Zend Framework">
<link rel="chapter" href="introduction.overview.html" title="Chapter 1. Overview">
<link rel="chapter" href="introduction.installation.html" title="Chapter 2. Installation">
<link rel="part" href="learning.html" title="Part II. Learning Zend Framework">
<link rel="article" href="learning.di.html" title="Learning Dependency Injection">
<link rel="part" href="reference.html" title="Part III. Zend Framework Reference">
<link rel="chapter" href="zend.acl.html" title="Chapter 3. Zend\Acl">
<link rel="chapter" href="zend.authentication.html" title="Chapter 4. Zend\Authentication">
<link rel="chapter" href="zend.barcode.html" title="Chapter 5. Zend\Barcode">
<link rel="chapter" href="zend.cache.html" title="Chapter 6. Zend\Cache">
<link rel="chapter" href="zend.captcha.html" title="Chapter 7. Zend\Captcha">
<link rel="chapter" href="zend.config.html" title="Chapter 8. Zend_Config">
<link rel="chapter" href="zend.crypt.html" title="Chapter 9. Zend_Crypt">
<link rel="chapter" href="zend.db.html" title="Chapter 10. Zend_Db">
<link rel="chapter" href="zend.di.html" title="Chapter 11. Zend\Di">
<link rel="chapter" href="zend.dom.html" title="Chapter 12. Zend\Dom">
<link rel="chapter" href="zend.event-manager.html" title="Chapter 13. Zend\EventManager">
<link rel="chapter" href="zend.form.html" title="Chapter 14. Zend_Form">
<link rel="chapter" href="zend.http.html" title="Chapter 15. Zend_Http">
<link rel="chapter" href="zend.i18n.html" title="Chapter 16. Zend_I18n">
<link rel="chapter" href="zend.input-filter.html" title="Chapter 17. Zend\InputFilter">
<link rel="chapter" href="zend.ldap.html" title="Chapter 18. Zend_Ldap">
<link rel="chapter" href="zend.loader.html" title="Chapter 19. Zend\Loader">
<link rel="refentry" href="zend.loader.autoloader-factory.methods.factory.html" title="factory">
<link rel="refentry" href="zend.loader.autoloader-factory.methods.get-registered-autoloaders.html" title="getRegisteredAutoloaders">
<link rel="refentry" href="zend.loader.plugin-class-loader.methods.constructor.html" title="__construct">
<link rel="refentry" href="zend.loader.plugin-class-loader.methods.add-static-map.html" title="addStaticMap">
<link rel="refentry" href="zend.loader.plugin-class-loader.methods.register-plugin.html" title="registerPlugin">
<link rel="refentry" href="zend.loader.plugin-class-loader.methods.register-plugins.html" title="registerPlugins">
<link rel="refentry" href="zend.loader.plugin-class-loader.methods.unregister-plugin.html" title="unregisterPlugin">
<link rel="refentry" href="zend.loader.plugin-class-loader.methods.get-registered-plugins.html" title="getRegisteredPlugins">
<link rel="refentry" href="zend.loader.plugin-class-loader.methods.is-loaded.html" title="isLoaded">
<link rel="refentry" href="zend.loader.plugin-class-loader.methods.get-class-name.html" title="getClassName">
<link rel="refentry" href="zend.loader.plugin-class-loader.methods.load.html" title="load">
<link rel="refentry" href="zend.loader.plugin-class-loader.methods.get-iterator.html" title="getIterator">
<link rel="refentry" href="zend.loader.short-name-locator.methods.is-loaded.html" title="isLoaded">
<link rel="refentry" href="zend.loader.short-name-locator.methods.get-class-name.html" title="getClassName">
<link rel="refentry" href="zend.loader.short-name-locator.methods.load.html" title="load">
<link rel="refentry" href="zend.loader.plugin-class-locator.methods.register-plugin.html" title="registerPlugin">
<link rel="refentry" href="zend.loader.plugin-class-locator.methods.unregister-plugin.html" title="unregisterPlugin">
<link rel="refentry" href="zend.loader.plugin-class-locator.methods.get-registered-plugins.html" title="getRegisteredPlugins">
<link rel="refentry" href="zend.loader.spl-autoloader.methods.constructor.html" title="__construct">
<link rel="refentry" href="zend.loader.spl-autoloader.methods.set-options.html" title="setOptions">
<link rel="refentry" href="zend.loader.spl-autoloader.methods.autoload.html" title="autoload">
<link rel="refentry" href="zend.loader.spl-autoloader.methods.register.html" title="register">
<link rel="refentry" href="zend.loader.class-map-autoloader.methods.constructor.html" title="__construct">
<link rel="refentry" href="zend.loader.class-map-autoloader.methods.set-options.html" title="setOptions">
<link rel="refentry" href="zend.loader.class-map-autoloader.methods.register-autoload-map.html" title="registerAutoloadMap">
<link rel="refentry" href="zend.loader.class-map-autoloader.methods.register-autoload-maps.html" title="registerAutoloadMaps">
<link rel="refentry" href="zend.loader.class-map-autoloader.methods.get-autoload-map.html" title="getAutoloadMap">
<link rel="refentry" href="zend.loader.class-map-autoloader.methods.autoload.html" title="autoload">
<link rel="refentry" href="zend.loader.class-map-autoloader.methods.register.html" title="register">
<link rel="refentry" href="zend.loader.standard-autoloader.methods.constructor.html" title="__construct">
<link rel="refentry" href="zend.loader.standard-autoloader.methods.set-options.html" title="setOptions">
<link rel="refentry" href="zend.loader.standard-autoloader.methods.set-fallback-autoloader.html" title="setFallbackAutoloader">
<link rel="refentry" href="zend.loader.standard-autoloader.methods.is-fallback-autoloader.html" title="isFallbackAutoloader">
<link rel="refentry" href="zend.loader.standard-autoloader.methods.register-namespace.html" title="registerNamespace">
<link rel="refentry" href="zend.loader.standard-autoloader.methods.register-namespaces.html" title="registerNamespaces">
<link rel="refentry" href="zend.loader.standard-autoloader.methods.register-prefix.html" title="registerPrefix">
<link rel="refentry" href="zend.loader.standard-autoloader.methods.register-prefixes.html" title="registerPrefixes">
<link rel="refentry" href="zend.loader.standard-autoloader.methods.autoload.html" title="autoload">
<link rel="refentry" href="zend.loader.standard-autoloader.methods.register.html" title="register">
<link rel="refentry" href="zend.loader.prefix-path-loader.methods.constructor.html" title="__construct">
<link rel="refentry" href="zend.loader.prefix-path-loader.methods.add-static-paths.html" title="addStaticPaths">
<link rel="refentry" href="zend.loader.prefix-path-loader.methods.set-options.html" title="setOptions">
<link rel="refentry" href="zend.loader.prefix-path-loader.methods.add-prefix-path.html" title="addPrefixPath">
<link rel="refentry" href="zend.loader.prefix-path-loader.methods.add-prefix-paths.html" title="addPrefixPaths">
<link rel="refentry" href="zend.loader.prefix-path-loader.methods.get-paths.html" title="getPaths">
<link rel="refentry" href="zend.loader.prefix-path-loader.methods.clear-paths.html" title="clearPaths">
<link rel="refentry" href="zend.loader.prefix-path-loader.methods.remove-prefix-path.html" title="removePrefixPath">
<link rel="refentry" href="zend.loader.prefix-path-loader.methods.is-loaded.html" title="isLoaded">
<link rel="refentry" href="zend.loader.prefix-path-loader.methods.get-class-name.html" title="getClassName">
<link rel="refentry" href="zend.loader.prefix-path-loader.methods.load.html" title="load">
<link rel="refentry" href="zend.loader.prefix-path-loader.methods.get-plugin-map.html" title="getPluginMap">
<link rel="refentry" href="zend.loader.prefix-path-loader.methods.get-class-map.html" title="getClassMap">
<link rel="refentry" href="zend.loader.prefix-path-mapper.methods.add-prefix-path.html" title="addPrefixPath">
<link rel="refentry" href="zend.loader.prefix-path-mapper.methods.remove-prefix-path.html" title="removePrefixPath">
<link rel="chapter" href="zend.mail.html" title="Chapter 20. Zend\Mail">
<link rel="chapter" href="zend.module-manager.html" title="Chapter 21. Zend\ModuleManager">
<link rel="chapter" href="zend.mvc.html" title="Chapter 22. Zend\Mvc">
<link rel="chapter" href="zend.service-manager.html" title="Chapter 23. Zend\ServiceManager">
<link rel="chapter" href="zend.stdlib.html" title="Chapter 24. Zend\Stdlib">
<link rel="chapter" href="zend.uri.html" title="Chapter 25. Zend_Uri">
<link rel="chapter" href="zend.validator.html" title="Chapter 26. Zend\Validator">
<link rel="chapter" href="zend.view.html" title="Chapter 27. Zend_View">
<link rel="chapter" href="zend.xmlrpc.html" title="Chapter 28. Zend_XmlRpc">
<link rel="appendix" href="copyrights.html" title="Appendix A. Copyright Information">
<link rel="subsection" href="zend.loader.class-map-autoloader.html#zend.loader.class-map-autoloader.intro" title="19.6.1. Overview">
<link rel="subsection" href="zend.loader.class-map-autoloader.html#zend.loader.class-map-autoloader.quick-start" title="19.6.2. Quick Start">
<link rel="subsection" href="zend.loader.class-map-autoloader.html#zend.loader.class-map-autoloader.options" title="19.6.3. Configuration Options">
<link rel="subsection" href="zend.loader.class-map-autoloader.html#zend.loader.class-map-autoloader.methods" title="19.6.4. Available Methods">
<link rel="subsection" href="zend.loader.class-map-autoloader.html#zend.loader.class-map-autoloader.examples" title="19.6.5. Examples">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">19.6. The ClassMapAutoloader</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.loader.spl-autoloader.methods.register.html">Prev</a> </td>
<th width="60%" align="center">Chapter 19. Zend\Loader</th>
<td width="20%" align="right"> <a accesskey="n" href="zend.loader.class-map-autoloader.methods.constructor.html">Next</a>
</td>
</tr>
</table></div>
<div class="section" title="19.6. The ClassMapAutoloader">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.loader.class-map-autoloader"></a>19.6. The ClassMapAutoloader</h2></div></div></div>
<div class="section" title="19.6.1. Overview">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.loader.class-map-autoloader.intro"></a>19.6.1. Overview</h3></div></div></div>
<p>
            The <code class="classname">ClassMapAutoloader</code> is designed with performance in mind. The
            idea behind it is simple: when asked to load a class, see if it's in the map, and, if
            so, load the file associated with the class in the map. This avoids unnecessary
            filesystem operations, and can also ensure the autoloader "plays nice" with opcode
            caches and PHP's realpath cache.
        </p>
<p>
            In order to use the <code class="classname">ClassMapAutoloader</code>, you first need class
            maps. Zend Framework ships with a class map per component or, if you grabbed the entire
            ZF distribution, a class map for the entire Zend Framework. These maps are typically in
            a file named <code class="filename">.classmap.php</code> within either the "Zend" directory, or
            an individual component's source directory.
        </p>
<p>
            Zend Framework also provides a tool for generating these class maps; you can find it in
            <code class="filename">bin/classmap_generator.php</code> of the distribution. Full documentation
            of this too is provided in <a class="xref" href="zend.loader.classmap-generator.html" title="19.8. The Class Map Generator utility: bin/classmap_generator.php">Section 19.8, “The Class Map Generator utility: bin/classmap_generator.php”</a>.
        </p>
</div>
<div class="section" title="19.6.2. Quick Start">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.loader.class-map-autoloader.quick-start"></a>19.6.2. Quick Start</h3></div></div></div>
<p>
            The first step is to generate a class map file. You may run this over any directory
            containing source code anywhere underneath it.
        </p>
<pre class="programlisting">
php classmap_generator.php Some/Directory/
</pre>
<p>
            This will create a file named <code class="filename">Some/Directory/.classmap.php</code>, which
            is a PHP file returning an associative array that represents the class map.
        </p>
<p>
            Within your code, you will now instantiate the
            <code class="classname">ClassMapAutoloader</code>, and provide it the location of the map.
        </p>
<pre class="programlisting">
// This example assumes ZF is on your include_path.
// You could also load the autoloader class from a path relative to the
// current script, or via an absolute path.
require_once 'Zend/Loader/ClassMapAutoloader.php';
$loader = new Zend\Loader\ClassMapAutoloader();

// Register the class map:
$loader-&gt;registerAutoloadMap('Some/Directory/.classmap.php');

// Register with spl_autoload:
$loader-&gt;register();
</pre>
<p>
            At this point, you may now use any classes referenced in your class map.
        </p>
</div>
<div class="section" title="19.6.3. Configuration Options">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.loader.class-map-autoloader.options"></a>19.6.3. Configuration Options</h3></div></div></div>
<p>
            The <code class="classname">ClassMapAutoloader</code> defines the following options.
        </p>
<div class="variablelist" title="ClassMapAutoloader Options">
<p class="title"><b>ClassMapAutoloader Options</b></p>
<dl>
<dt><span class="term">$options</span></dt>
<dd>
<p>
                        The <code class="classname">ClassMapAutoloader</code> expects an array of options,
                        where each option is either a filename referencing a class map, or an
                        associative array of class name/filename pairs.
                    </p>
<p>
                        As an example:
                    </p>
<pre class="programlisting">
// Configuration defining both a file-based class map, and an array map
$config = array(
    __DIR__ . '/library/.classmap.php', // file-based class map
    array(                              // array class map
        'Application\Bootstrap' =&gt; __DIR__ . '/application/Bootstrap.php',
        'Test\Bootstrap'        =&gt; __DIR__ . '/tests/Bootstrap.php',
    ),
);
</pre>
</dd>
</dl>
</div>
</div>
<div class="section" title="19.6.4. Available Methods"><div class="titlepage"><div><div><h3 class="title">
<a name="zend.loader.class-map-autoloader.methods"></a>19.6.4. Available Methods</h3></div></div></div></div>
<div class="section" title="19.6.5. Examples">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.loader.class-map-autoloader.examples"></a>19.6.5. Examples</h3></div></div></div>
<div class="example">
<a name="zend.loader.class-map-autoloader.examples.configuration"></a><p class="title"><b>Example 19.4. Using configuration to seed ClassMapAutoloader</b></p>
<div class="example-contents">
<p>
                Often, you will want to configure your <code class="classname">ClassMapAutoloader</code>.
                These values may come from a configuration file, a cache (such as ShMem or
                memcached), or a simple PHP array. The following is an example of a PHP array that
                could be used to configure the autoloader:
            </p>
<pre class="programlisting">
// Configuration defining both a file-based class map, and an array map
$config = array(
APPLICATION_PATH . '/../library/.classmap.php', // file-based class map
    array(                              // array class map
        'Application\Bootstrap' =&gt; APPLICATION_PATH . '/Bootstrap.php',
        'Test\Bootstrap'        =&gt; APPLICATION_PATH . '/../tests/Bootstrap.php',
    ),
);
</pre>
<p>
                An eqivalent INI style configuration might look like this:
            </p>
<pre class="programlisting">
classmap.library = APPLICATION_PATH "/../library/.classmap.php"
classmap.resources.Application\Bootstrap = APPLICATION_PATH "/Bootstrap.php"
classmap.resources.Test\Bootstrap = APPLICATION_PATH "/../tests/Bootstrap.php"
</pre>
<p>
                Once you have your configuration, you can pass it either to the constructor of the
                <code class="classname">ClassMapAutoloader</code>, to its
                <code class="methodname">setOptions()</code> method, or to
                <code class="methodname">registerAutoloadMaps()</code>.
            </p>
<pre class="programlisting">
/* The following are all equivalent */

// To the constructor:
$loader = new Zend\Loader\ClassMapAutoloader($config);

// To setOptions():
$loader = new Zend\Loader\ClassMapAutoloader();
$loader-&gt;setOptions($config);

// To registerAutoloadMaps():
$loader = new Zend\Loader\ClassMapAutoloader();
$loader-&gt;registerAutoloadMaps($config);
</pre>
</div>
</div>
<br class="example-break">
</div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.loader.spl-autoloader.methods.register.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="zend.loader.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="zend.loader.class-map-autoloader.methods.constructor.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">register </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> __construct</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
