

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Zend Framework 1.7 &mdash; Zend Framework 2 2.0.0rc3 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0rc3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Zend Framework 2 2.0.0rc3 documentation" href="../index.html" />
<style type="text/css">
    /* Styles for floating Edit on GitHub box */
    #editor-trap {
        padding: 1em;
        border: 1px solid white;
        width: 250px;

        display: none;
        color: white;
        background: #3f454b;
        position: fixed;
        bottom: 5px;
        left: 175px;
        font-size: 85%;
        text-align: left;
        z-index: 2;

        box-shadow: 0 4px 6px #333;
        -moz-box-shadow: 0 4px 6px #333;
        -webkit-box-shadow: 0 4px 6px #333;
        
        cursor: pointer;
    }

    #editor-trap h3 {
        margin: 0 0 0.5em 0;
        padding: 0;
    }

    #editor-trap h3 > span {
        padding: 0 6px;
        border: solid white;
        border-width: 0 1px 4px 1px;
        font-size: 10px;
    }

    #editor-trap a {
        color: #98DBCC;
    }

    #editor-trap ol {
        margin: 0;
        padding: 0 0 0 2em;
    }

    /* Hide trick */
    #editor-trap.toggled > * {
        display: none;
    }


    #editor-trap.toggled > h3 {
        display: block;
    }

    #editor-trap.toggled > h3 > span {
        border-width: 6px 1px 0 1px;
    }
    
    #edit-button {
        position: fixed;
        bottom: 5px;
        left: 5px;
        z-index: 2;
        width: 162px;
        height: 42px;
    }
</style>

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../index.html">Zend Framework 2 2.0.0rc3 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="zend-framework-1-7">
<span id="migration-17"></span><h1>Zend Framework 1.7<a class="headerlink" href="#zend-framework-1-7" title="Permalink to this headline">¶</a></h1>
<p>When upgrading from a previous release to Zend Framework 1.7 or higher you should note the following migration
notes.</p>
<div class="section" id="zend-controller">
<span id="migration-17-zend-controller"></span><h2>Zend_Controller<a class="headerlink" href="#zend-controller" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dispatcher-interface-changes">
<span id="migration-17-zend-controller-dispatcher"></span><h3>Dispatcher Interface Changes<a class="headerlink" href="#dispatcher-interface-changes" title="Permalink to this headline">¶</a></h3>
<p>Users brought to our attention the fact that <tt class="docutils literal"><span class="pre">Zend_Controller_Action_Helper_ViewRenderer</span></tt> were using a method of
the dispatcher abstract class that was not in the dispatcher interface. We have now added the following method to
ensure that custom dispatchers will continue to work with the shipped implementations:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">formatModuleName()</span></tt>: should be used to take a raw controller name, such as one that would be packaged inside a
request object, and reformat it to a proper class name that a class extending <tt class="docutils literal"><span class="pre">Zend_Controller_Action</span></tt> would
use</li>
</ul>
</div>
</div>
<div class="section" id="zend-file-transfer">
<span id="migration-17-zend-file-transfer"></span><h2>Zend_File_Transfer<a class="headerlink" href="#zend-file-transfer" title="Permalink to this headline">¶</a></h2>
<div class="section" id="changes-when-using-filters-and-validators">
<span id="migration-17-zend-file-transfer-validators"></span><h3>Changes when using filters and validators<a class="headerlink" href="#changes-when-using-filters-and-validators" title="Permalink to this headline">¶</a></h3>
<p>As noted by users, the validators from <tt class="docutils literal"><span class="pre">Zend_File_Transfer</span></tt> do not work in conjunction with <tt class="docutils literal"><span class="pre">Zend_Config</span></tt> due
to the fact that they have not used named arrays.</p>
<p>Therefor, all filters and validators for <tt class="docutils literal"><span class="pre">Zend_File_Transfer</span></tt> have been reworked. While the old signatures
continue to work, they have been marked as deprecated, and will emit a <em>PHP</em> notice asking you to fix them.</p>
<p>The following list shows you the changes you will have to do for proper usage of the parameters.</p>
</div>
<div class="section" id="filter-rename">
<span id="migration-17-zend-file-transfer-validators-rename"></span><h3>Filter: Rename<a class="headerlink" href="#filter-rename" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Old method <em>API</em>: <tt class="docutils literal"><span class="pre">Zend_Filter_File_Rename($oldfile,</span> <span class="pre">$newfile,</span> <span class="pre">$overwrite)</span></tt></li>
<li>New method <em>API</em>: <tt class="docutils literal"><span class="pre">Zend_Filter_File_Rename($options)</span></tt> where <tt class="docutils literal"><span class="pre">$options</span></tt> accepts the following array keys:
<strong>source</strong> equals to <tt class="docutils literal"><span class="pre">$oldfile</span></tt>, <strong>target</strong> equals to <tt class="docutils literal"><span class="pre">$newfile</span></tt>, <strong>overwrite</strong> equals to <tt class="docutils literal"><span class="pre">$overwrite</span></tt>.</li>
</ul>
<p class="rubric" id="migration-17-zend-file-transfer-validators-rename-example">Changes for the rename filter from 1.6 to 1.7</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// Example for 1.6</span>
<span class="nv">$upload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_File_Transfer_Adapter_Http</span><span class="p">();</span>
<span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="s1">&#39;Rename&#39;</span><span class="p">,</span>
                   <span class="k">array</span><span class="p">(</span><span class="s1">&#39;/path/to/oldfile&#39;</span><span class="p">,</span> <span class="s1">&#39;/path/to/newfile&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">));</span>

<span class="c1">// Same example for 1.7</span>
<span class="nv">$upload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_File_Transfer_Adapter_Http</span><span class="p">();</span>
<span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="s1">&#39;Rename&#39;</span><span class="p">,</span>
                   <span class="k">array</span><span class="p">(</span><span class="s1">&#39;source&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/path/to/oldfile&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;target&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/path/to/newfile&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;overwrite&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">));</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="validator-count">
<span id="migration-17-zend-file-transfer-validators-count"></span><h3>Validator: Count<a class="headerlink" href="#validator-count" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Old method <em>API</em>: <tt class="docutils literal"><span class="pre">Zend_Validate_File_Count($min,</span> <span class="pre">$max)</span></tt></li>
<li>New method <em>API</em>: <tt class="docutils literal"><span class="pre">Zend_Validate_File_Count($options)</span></tt> where <tt class="docutils literal"><span class="pre">$options</span></tt> accepts the following array keys:
<strong>min</strong> equals to <tt class="docutils literal"><span class="pre">$min</span></tt>, <strong>max</strong> equals to <tt class="docutils literal"><span class="pre">$max</span></tt>.</li>
</ul>
<p class="rubric" id="migration-17-zend-file-transfer-validators-count-example">Changes for the count validator from 1.6 to 1.7</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// Example for 1.6</span>
<span class="nv">$upload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_File_Transfer_Adapter_Http</span><span class="p">();</span>
<span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">addValidator</span><span class="p">(</span><span class="s1">&#39;Count&#39;</span><span class="p">,</span>
                      <span class="k">array</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">));</span>

<span class="c1">// Same example for 1.7</span>
<span class="nv">$upload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_File_Transfer_Adapter_Http</span><span class="p">();</span>
<span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">addValidator</span><span class="p">(</span><span class="s1">&#39;Count&#39;</span><span class="p">,</span>
                      <span class="k">false</span><span class="p">,</span>
                      <span class="k">array</span><span class="p">(</span><span class="s1">&#39;min&#39;</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
                            <span class="s1">&#39;max&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">));</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="validator-extension">
<span id="migration-17-zend-file-transfer-validators-extension"></span><h3>Validator:Extension<a class="headerlink" href="#validator-extension" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Old method <em>API</em>: <tt class="docutils literal"><span class="pre">Zend_Validate_File_Extension($extension,</span> <span class="pre">$case)</span></tt></li>
<li>New method <em>API</em>: <tt class="docutils literal"><span class="pre">Zend_Validate_File_Extension($options)</span></tt> where <tt class="docutils literal"><span class="pre">$options</span></tt> accepts the following array keys:
<strong>*</strong> equals to <tt class="docutils literal"><span class="pre">$extension</span></tt> and can have any other key, <strong>case</strong> equals to <tt class="docutils literal"><span class="pre">$case</span></tt>.</li>
</ul>
<p class="rubric" id="migration-17-zend-file-transfer-validators-extension-example">Changes for the extension validator from 1.6 to 1.7</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// Example for 1.6</span>
<span class="nv">$upload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_File_Transfer_Adapter_Http</span><span class="p">();</span>
<span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">addValidator</span><span class="p">(</span><span class="s1">&#39;Extension&#39;</span><span class="p">,</span>
                      <span class="k">array</span><span class="p">(</span><span class="s1">&#39;jpg,gif,bmp&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">));</span>

<span class="c1">// Same example for 1.7</span>
<span class="nv">$upload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_File_Transfer_Adapter_Http</span><span class="p">();</span>
<span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">addValidator</span><span class="p">(</span><span class="s1">&#39;Extension&#39;</span><span class="p">,</span>
                      <span class="k">false</span><span class="p">,</span>
                      <span class="k">array</span><span class="p">(</span><span class="s1">&#39;extension1&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;jpg,gif,bmp&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;case&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">));</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="validator-filessize">
<span id="migration-17-zend-file-transfer-validators-filessize"></span><h3>Validator: FilesSize<a class="headerlink" href="#validator-filessize" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Old method <em>API</em>: <tt class="docutils literal"><span class="pre">Zend_Validate_File_FilesSize($min,</span> <span class="pre">$max,</span> <span class="pre">$bytestring)</span></tt></li>
<li>New method <em>API</em>: <tt class="docutils literal"><span class="pre">Zend_Validate_File_FilesSize($options)</span></tt> where <tt class="docutils literal"><span class="pre">$options</span></tt> accepts the following array keys:
<strong>min</strong> equals to <tt class="docutils literal"><span class="pre">$min</span></tt>, <strong>max</strong> equals to <tt class="docutils literal"><span class="pre">$max</span></tt>, <strong>bytestring</strong> equals to <tt class="docutils literal"><span class="pre">$bytestring</span></tt>.</li>
</ul>
<p>Additionally, the <tt class="docutils literal"><span class="pre">useByteString()</span></tt> method signature has changed. It can only be used to test if the validator is
expecting to use byte strings in generated messages. To set the value of the flag, use the <tt class="docutils literal"><span class="pre">setUseByteString()</span></tt>
method.</p>
<p class="rubric" id="migration-17-zend-file-transfer-validators-filessize-example">Changes for the filessize validator from 1.6 to 1.7</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// Example for 1.6</span>
<span class="nv">$upload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_File_Transfer_Adapter_Http</span><span class="p">();</span>
<span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">addValidator</span><span class="p">(</span><span class="s1">&#39;FilesSize&#39;</span><span class="p">,</span>
                   <span class="k">array</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="k">true</span><span class="p">));</span>

<span class="c1">// Same example for 1.7</span>
<span class="nv">$upload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_File_Transfer_Adapter_Http</span><span class="p">();</span>
<span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">addValidator</span><span class="p">(</span><span class="s1">&#39;FilesSize&#39;</span><span class="p">,</span>
                      <span class="k">false</span><span class="p">,</span>
                      <span class="k">array</span><span class="p">(</span><span class="s1">&#39;min&#39;</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">,</span>
                            <span class="s1">&#39;max&#39;</span> <span class="o">=&gt;</span> <span class="mi">10000</span><span class="p">,</span>
                            <span class="s1">&#39;bytestring&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">));</span>

<span class="c1">// Example for 1.6</span>
<span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">useByteString</span><span class="p">(</span><span class="k">true</span><span class="p">);</span> <span class="c1">// set flag</span>

<span class="c1">// Same example for 1.7</span>
<span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">setUseByteSting</span><span class="p">(</span><span class="k">true</span><span class="p">);</span> <span class="c1">// set flag</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="validator-hash">
<span id="migration-17-zend-file-transfer-validators-hash"></span><h3>Validator: Hash<a class="headerlink" href="#validator-hash" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Old method <em>API</em>: <tt class="docutils literal"><span class="pre">Zend_Validate_File_Hash($hash,</span> <span class="pre">$algorithm)</span></tt></li>
<li>New method <em>API</em>: <tt class="docutils literal"><span class="pre">Zend_Validate_File_Hash($options)</span></tt> where <tt class="docutils literal"><span class="pre">$options</span></tt> accepts the following array keys:
<strong>*</strong> equals to <tt class="docutils literal"><span class="pre">$hash</span></tt> and can have any other key, <strong>algorithm</strong> equals to <tt class="docutils literal"><span class="pre">$algorithm</span></tt>.</li>
</ul>
<p class="rubric" id="migration-17-zend-file-transfer-validators-hash-example">Changes for the hash validator from 1.6 to 1.7</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// Example for 1.6</span>
<span class="nv">$upload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_File_Transfer_Adapter_Http</span><span class="p">();</span>
<span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">addValidator</span><span class="p">(</span><span class="s1">&#39;Hash&#39;</span><span class="p">,</span>
                   <span class="k">array</span><span class="p">(</span><span class="s1">&#39;12345&#39;</span><span class="p">,</span> <span class="s1">&#39;md5&#39;</span><span class="p">));</span>

<span class="c1">// Same example for 1.7</span>
<span class="nv">$upload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_File_Transfer_Adapter_Http</span><span class="p">();</span>
<span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">addValidator</span><span class="p">(</span><span class="s1">&#39;Hash&#39;</span><span class="p">,</span>
                      <span class="k">false</span><span class="p">,</span>
                      <span class="k">array</span><span class="p">(</span><span class="s1">&#39;hash1&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;12345&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;algorithm&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;md5&#39;</span><span class="p">));</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="validator-imagesize">
<span id="migration-17-zend-file-transfer-validators-imagesize"></span><h3>Validator: ImageSize<a class="headerlink" href="#validator-imagesize" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Old method <em>API</em>: <tt class="docutils literal"><span class="pre">Zend_Validate_File_ImageSize($minwidth,</span> <span class="pre">$minheight,</span> <span class="pre">$maxwidth,</span> <span class="pre">$maxheight)</span></tt></li>
<li>New method <em>API</em>: <tt class="docutils literal"><span class="pre">Zend_Validate_File_FilesSize($options)</span></tt> where <tt class="docutils literal"><span class="pre">$options</span></tt> accepts the following array keys:
<strong>minwidth</strong> equals to <tt class="docutils literal"><span class="pre">$minwidth</span></tt>, <strong>maxwidth</strong> equals to <tt class="docutils literal"><span class="pre">$maxwidth</span></tt>, <strong>minheight</strong> equals to
<tt class="docutils literal"><span class="pre">$minheight</span></tt>, <strong>maxheight</strong> equals to <tt class="docutils literal"><span class="pre">$maxheight</span></tt>.</li>
</ul>
<p class="rubric" id="migration-17-zend-file-transfer-validators-imagesize-example">Changes for the imagesize validator from 1.6 to 1.7</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// Example for 1.6</span>
<span class="nv">$upload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_File_Transfer_Adapter_Http</span><span class="p">();</span>
<span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">addValidator</span><span class="p">(</span><span class="s1">&#39;ImageSize&#39;</span><span class="p">,</span>
                      <span class="k">array</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">));</span>

<span class="c1">// Same example for 1.7</span>
<span class="nv">$upload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_File_Transfer_Adapter_Http</span><span class="p">();</span>
<span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">addValidator</span><span class="p">(</span><span class="s1">&#39;ImageSize&#39;</span><span class="p">,</span>
                      <span class="k">false</span><span class="p">,</span>
                      <span class="k">array</span><span class="p">(</span><span class="s1">&#39;minwidth&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
                            <span class="s1">&#39;minheight&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
                            <span class="s1">&#39;maxwidth&#39;</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">,</span>
                            <span class="s1">&#39;maxheight&#39;</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">));</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="validator-size">
<span id="migration-17-zend-file-transfer-validators-size"></span><h3>Validator: Size<a class="headerlink" href="#validator-size" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Old method <em>API</em>: <tt class="docutils literal"><span class="pre">Zend_Validate_File_Size($min,</span> <span class="pre">$max,</span> <span class="pre">$bytestring)</span></tt></li>
<li>New method <em>API</em>: <tt class="docutils literal"><span class="pre">Zend_Validate_File_Size($options)</span></tt> where <tt class="docutils literal"><span class="pre">$options</span></tt> accepts the following array keys:
<strong>min</strong> equals to <tt class="docutils literal"><span class="pre">$min</span></tt>, <strong>max</strong> equals to <tt class="docutils literal"><span class="pre">$max</span></tt>, <strong>bytestring</strong> equals to <tt class="docutils literal"><span class="pre">$bytestring</span></tt>.</li>
</ul>
<p class="rubric" id="migration-17-zend-file-transfer-validators-size-example">Changes for the size validator from 1.6 to 1.7</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// Example for 1.6</span>
<span class="nv">$upload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_File_Transfer_Adapter_Http</span><span class="p">();</span>
<span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">addValidator</span><span class="p">(</span><span class="s1">&#39;Size&#39;</span><span class="p">,</span>
                      <span class="k">array</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="k">true</span><span class="p">));</span>

<span class="c1">// Same example for 1.7</span>
<span class="nv">$upload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_File_Transfer_Adapter_Http</span><span class="p">();</span>
<span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">addValidator</span><span class="p">(</span><span class="s1">&#39;Size&#39;</span><span class="p">,</span>
                      <span class="k">false</span><span class="p">,</span>
                      <span class="k">array</span><span class="p">(</span><span class="s1">&#39;min&#39;</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">,</span>
                            <span class="s1">&#39;max&#39;</span> <span class="o">=&gt;</span> <span class="mi">10000</span><span class="p">,</span>
                            <span class="s1">&#39;bytestring&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">));</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="zend-locale">
<span id="migration-17-zend-locale"></span><h2>Zend_Locale<a class="headerlink" href="#zend-locale" title="Permalink to this headline">¶</a></h2>
<div class="section" id="changes-when-using-islocale">
<span id="migration-17-zend-locale-islocale"></span><h3>Changes when using isLocale()<a class="headerlink" href="#changes-when-using-islocale" title="Permalink to this headline">¶</a></h3>
<p>According to the coding standards <tt class="docutils literal"><span class="pre">isLocale()</span></tt> had to be changed to return a boolean. In previous releases a
string was returned on success. For release 1.7 a compatibility mode has been added which allows to use the old
behaviour of a returned string, but it triggers a user warning to mention you to change to the new behaviour. The
rerouting which the old behaviour of <tt class="docutils literal"><span class="pre">isLocale()</span></tt> could have done is no longer neccessary as all I18n will now
process a rerouting themself.</p>
<p>To migrate your scripts to the new <em>API</em>, simply use the method as shown below.</p>
<p class="rubric" id="migration-17-zend-locale-islocale-example">How to change isLocale() from 1.6 to 1.7</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// Example for 1.6</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$locale</span> <span class="o">=</span> <span class="nx">Zend_Locale</span><span class="o">::</span><span class="na">isLocale</span><span class="p">(</span><span class="nv">$locale</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// do something</span>
<span class="p">}</span>

<span class="c1">// Same example for 1.7</span>

<span class="c1">// You should change the compatiblity mode to prevent user warnings</span>
<span class="c1">// But you can do this in your bootstrap</span>
<span class="nx">Zend_Locale</span><span class="o">::</span><span class="nv">$compatibilityMode</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">Zend_Locale</span><span class="o">::</span><span class="na">isLocale</span><span class="p">(</span><span class="nv">$locale</span><span class="p">))</span> <span class="p">{</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Note that you can use the second parameter to see if the locale is correct without processing a rerouting.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// Example for 1.6</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$locale</span> <span class="o">=</span> <span class="nx">Zend_Locale</span><span class="o">::</span><span class="na">isLocale</span><span class="p">(</span><span class="nv">$locale</span><span class="p">,</span> <span class="k">false</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// do something</span>
<span class="p">}</span>

<span class="c1">// Same example for 1.7</span>

<span class="c1">// You should change the compatiblity mode to prevent user warnings</span>
<span class="c1">// But you can do this in your bootstrap</span>
<span class="nx">Zend_Locale</span><span class="o">::</span><span class="nv">$compatibilityMode</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">Zend_Locale</span><span class="o">::</span><span class="na">isLocale</span><span class="p">(</span><span class="nv">$locale</span><span class="p">,</span> <span class="k">false</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">Zend_Locale</span><span class="o">::</span><span class="na">isLocale</span><span class="p">(</span><span class="nv">$locale</span><span class="p">,</span> <span class="k">true</span><span class="p">))</span> <span class="p">{</span>
        <span class="c1">// no locale at all</span>
    <span class="p">}</span>

    <span class="c1">// original string is no locale but can be rerouted</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="changes-when-using-getdefault">
<span id="migration-17-zend-locale-islocale-getdefault"></span><h3>Changes when using getDefault()<a class="headerlink" href="#changes-when-using-getdefault" title="Permalink to this headline">¶</a></h3>
<p>The meaning of the <tt class="docutils literal"><span class="pre">getDefault()</span></tt> method has been change due to the fact that we integrated a framework locale
which can be set with <tt class="docutils literal"><span class="pre">setDefault()</span></tt>. It does no longer return the locale chain but only the set framework
locale.</p>
<p>To migrate your scripts to the new <em>API</em>, simply use the method as shown below.</p>
<p class="rubric" id="migration-17-zend-locale-islocale-getdefault-example">How to change getDefault() from 1.6 to 1.7</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// Example for 1.6</span>
<span class="nv">$locales</span> <span class="o">=</span> <span class="nv">$locale</span><span class="o">-&gt;</span><span class="na">getDefault</span><span class="p">(</span><span class="nx">Zend_Locale</span><span class="o">::</span><span class="na">BROWSER</span><span class="p">);</span>

<span class="c1">// Same example for 1.7</span>

<span class="c1">// You should change the compatiblity mode to prevent user warnings</span>
<span class="c1">// But you can do this in your bootstrap</span>
<span class="nx">Zend_Locale</span><span class="o">::</span><span class="nv">$compatibilityMode</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>

<span class="nv">$locale</span> <span class="o">=</span> <span class="nx">Zend_Locale</span><span class="o">::</span><span class="na">getOrder</span><span class="p">(</span><span class="nx">Zend_Locale</span><span class="o">::</span><span class="na">BROWSER</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>Note that the second parameter of the old <tt class="docutils literal"><span class="pre">getDefault()</span></tt> implementation is not available anymore, but the
returned values are the same.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Per default the old behaviour is still active, but throws a user warning. When you have changed your code to the
new behaviour you should also change the compatibility mode to <tt class="docutils literal"><span class="pre">FALSE</span></tt> so that no warning is thrown anymore.</p>
</div>
</div>
</div>
<div class="section" id="zend-translator">
<span id="migration-17-zend-translator"></span><h2>Zend_Translator<a class="headerlink" href="#zend-translator" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setting-languages">
<span id="migration-17-zend-translator-languages"></span><h3>Setting languages<a class="headerlink" href="#setting-languages" title="Permalink to this headline">¶</a></h3>
<p>When using automatic detection of languages, or setting languages manually to <tt class="docutils literal"><span class="pre">Zend_Translator</span></tt> you may have
mentioned that from time to time a notice is thrown about not added or empty translations. In some previous release
also an exception was raised in some cases.</p>
<p>The reason is, that when a user requests a non existing language, you have no simple way to detect what&#8217;s going
wrong. So we added those notices which show up in your log and tell you that the user requested a language which
you do not support. Note that the code, even when we trigger such an notice, keeps working without problems.</p>
<p>But when you use a own error or exception handler, like xdebug, you will get all notices returned, even if this was
not your intention. This is due to the fact that these handlers override all settings from within <em>PHP</em>.</p>
<p>To get rid of these notices you can simply set the new option &#8216;disableNotices&#8217; to <tt class="docutils literal"><span class="pre">TRUE</span></tt>. It defaults to
<tt class="docutils literal"><span class="pre">FALSE</span></tt>.</p>
<p class="rubric" id="migration-17-zend-translator-example">Setting languages without getting notices</p>
<p>Let&#8217;s assume that we have &#8216;en&#8217; available and our user requests &#8216;fr&#8217; which is not in our portfolio of translated
languages.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$language</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_Translator</span><span class="p">(</span><span class="s1">&#39;gettext&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;/path/to/translations&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;auto&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>In this case we will get an notice about a not available language &#8216;fr&#8217;. Simply add the option and the notices will
be disabled.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$language</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_Translator</span><span class="p">(</span><span class="s1">&#39;gettext&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;/path/to/translations&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
                               <span class="k">array</span><span class="p">(</span><span class="s1">&#39;disableNotices&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">));</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="zend-view">
<span id="migration-17-zend-view"></span><h2>Zend_View<a class="headerlink" href="#zend-view" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <em>API</em> changes within <tt class="docutils literal"><span class="pre">Zend_View</span></tt> are only notable for you when you are upgrading to release 1.7.5 or
higher.</p>
</div>
<p>Prior to the 1.7.5 release, the Zend Framework team was notified of a potential Local File Inclusion (<em>LFI</em>)
vulnerability in the <tt class="docutils literal"><span class="pre">Zend_View::render()</span></tt> method. Prior to 1.7.5, the method allowed, by default, the ability to
specify view scripts that included parent directory notation (e.g., &#8221;../&#8221; or &#8221;..\&#8221;). This opens the possibility
for an <em>LFI</em> attack if unfiltered user input is passed to the <tt class="docutils literal"><span class="pre">render()</span></tt> method:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// Where $_GET[&#39;foobar&#39;] = &#39;../../../../etc/passwd&#39;</span>
<span class="k">echo</span> <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">&#39;foobar&#39;</span><span class="p">]);</span> <span class="c1">// LFI inclusion</span>
</pre></div>
</td></tr></table></div>
<p><tt class="docutils literal"><span class="pre">Zend_View</span></tt> now by default raises an exception when such a view script is requested.</p>
<div class="section" id="disabling-lfi-protection-for-the-render-method">
<span id="migration-17-zend-view-disabling"></span><h3>Disabling LFI protection for the render() method<a class="headerlink" href="#disabling-lfi-protection-for-the-render-method" title="Permalink to this headline">¶</a></h3>
<p>Since a number of developers reported that they were using such notation within their applications that was <strong>not</strong>
the result of user input, a special flag was created to allow disabling the default protection. You have two
methods for doing so: by passing the &#8216;lfiProtectionOn&#8217; key to the constructor options, or by explicitly calling the
<tt class="docutils literal"><span class="pre">setLfiProtection()</span></tt> method.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// Disabling via constructor</span>
<span class="nv">$view</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_View</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;lfiProtectionOn&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">));</span>

<span class="c1">// Disabling via exlicit method call:</span>
<span class="nv">$view</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_View</span><span class="p">();</span>
<span class="nv">$view</span><span class="o">-&gt;</span><span class="na">setLfiProtection</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/zf2_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Zend Framework 1.7</a><ul>
<li><a class="reference internal" href="#zend-controller">Zend_Controller</a><ul>
<li><a class="reference internal" href="#dispatcher-interface-changes">Dispatcher Interface Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#zend-file-transfer">Zend_File_Transfer</a><ul>
<li><a class="reference internal" href="#changes-when-using-filters-and-validators">Changes when using filters and validators</a></li>
<li><a class="reference internal" href="#filter-rename">Filter: Rename</a></li>
<li><a class="reference internal" href="#validator-count">Validator: Count</a></li>
<li><a class="reference internal" href="#validator-extension">Validator:Extension</a></li>
<li><a class="reference internal" href="#validator-filessize">Validator: FilesSize</a></li>
<li><a class="reference internal" href="#validator-hash">Validator: Hash</a></li>
<li><a class="reference internal" href="#validator-imagesize">Validator: ImageSize</a></li>
<li><a class="reference internal" href="#validator-size">Validator: Size</a></li>
</ul>
</li>
<li><a class="reference internal" href="#zend-locale">Zend_Locale</a><ul>
<li><a class="reference internal" href="#changes-when-using-islocale">Changes when using isLocale()</a></li>
<li><a class="reference internal" href="#changes-when-using-getdefault">Changes when using getDefault()</a></li>
</ul>
</li>
<li><a class="reference internal" href="#zend-translator">Zend_Translator</a><ul>
<li><a class="reference internal" href="#setting-languages">Setting languages</a></li>
</ul>
</li>
<li><a class="reference internal" href="#zend-view">Zend_View</a><ul>
<li><a class="reference internal" href="#disabling-lfi-protection-for-the-render-method">Disabling LFI protection for the render() method</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/ref/migration.17.txt"
           rel="nofollow">Show Source</a></li>
    <li><a href="https://github.com/zendframework/zf2-documentation/edit/master/docs/languages/en/ref/migration.17.rst"
           rel="nofollow">Edit Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../index.html">Zend Framework 2 2.0.0rc3 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2012, Zend Technologies Ltd..
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
<div id="edit-button">
    <img src="../_static/edit.gif" alt="Edit this document" title="Edit this document" onclick="javascript:$('#editor-trap').toggle();">
</div>
     
<div id="editor-trap">
    <h3>Edit this document</h3>

    <p>
        The source code of this file is hosted on GitHub. Everyone can
        update and fix errors in this document with few clicks -
        no downloads needed.
    <p>

    <ol>

        <li>
            Go to
            <a href="https://github.com/zendframework/zf2-documentation/edit/master/docs/languages/en/ref/migration.17.rst">
                Zend Framework 1.7
            </a> on GitHub.
        </li>

        <li>
            Edit file contents using GitHub's text editor in your web browser
        </li>

        <li>
            Fill in the <b>Commit message</b> text box at the end of the page telling <i>why</i>
            you did the changes. Press <b>Propose file change</b> button next to it when done.
        </li>


        <li>
            On <i>Send a pull request</i> page you don't need to fill in text anymore. Just
            press <b>Send pull request</b> button.
        </li>

        <li>
            Your changes are now queued for review under project's <a href="https://github.com/zendframework/zf2-documentation/pulls">Pull requests</a> tab on GitHub.
        </li>
    </ol>

</div>


  </body>
</html>